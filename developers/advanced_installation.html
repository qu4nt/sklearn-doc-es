

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  
  <title>Instalación de la versión de desarrollo de scikit-learn &mdash; documentación de scikit-learn - 0.24.1</title>
  
  <link rel="canonical" href="http://scikit-learn.org/stable/developers/advanced_installation.html" />

  
  <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  <link rel="stylesheet" href="../_static/css/vendor/bootstrap.min.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery-binder.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery-dataframe.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery-rendered-html.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
<script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
<script src="../_static/jquery.js"></script> 
</head>
<body>
<nav id="navbar" class="sk-docs-navbar navbar navbar-expand-md navbar-light bg-light py-0">
  <div class="container-fluid sk-docs-container px-0">
      <a class="navbar-brand py-0" href="../index.html">
        <img
          class="sk-brand-img"
          src="../_static/scikit-learn-logo-small.png"
          alt="logo"/>
      </a>
    <button
      id="sk-navbar-toggler"
      class="navbar-toggler"
      type="button"
      data-toggle="collapse"
      data-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="sk-navbar-collapse collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item">
          <a class="sk-nav-link nav-link" href="../install.html">Instalación</a>
        </li>
        <li class="nav-item">
          <a class="sk-nav-link nav-link" href="../user_guide.html">Manual de Usuario</a>
        </li>
        <li class="nav-item">
          <a class="sk-nav-link nav-link" href="../modules/classes.html">API</a>
        </li>
        <li class="nav-item">
          <a class="sk-nav-link nav-link" href="../auto_examples/index.html">Ejemplos</a>
        </li>
        <li class="nav-item">
          <a class="sk-nav-link nav-link nav-more-item-mobile-items" href="../getting_started.html">¿Cómo empezar?</a>
        </li>
        <li class="nav-item">
          <a class="sk-nav-link nav-link nav-more-item-mobile-items" href="../tutorial/index.html">Tutorial</a>
        </li>
        <li class="nav-item">
          <a class="sk-nav-link nav-link nav-more-item-mobile-items" href="../whats_new/v0.24.html">Novedades</a>
        </li>
        <li class="nav-item">
          <a class="sk-nav-link nav-link nav-more-item-mobile-items" href="../glossary.html">Glosario</a>
        </li>
        <li class="nav-item">
          <a class="sk-nav-link nav-link nav-more-item-mobile-items" href="index.html">Desarrollo</a>
        </li>
        <li class="nav-item">
          <a class="sk-nav-link nav-link nav-more-item-mobile-items" href="../faq.html">FAQ</a>
        </li>
        <li class="nav-item">
          <a class="sk-nav-link nav-link nav-more-item-mobile-items" href="../support.html">Soporte</a>
        </li>
        <li class="nav-item">
          <a class="sk-nav-link nav-link nav-more-item-mobile-items" href="../related_projects.html">Paquetes relacionados</a>
        </li>
        <li class="nav-item">
          <a class="sk-nav-link nav-link nav-more-item-mobile-items" href="../roadmap.html">Hoja de ruta</a>
        </li>
        <li class="nav-item">
          <a class="sk-nav-link nav-link nav-more-item-mobile-items" href="../about.html">Sobre nosotros</a>
        </li>
        <li class="nav-item">
          <a class="sk-nav-link nav-link nav-more-item-mobile-items" href="https://github.com/scikit-learn/scikit-learn">GitHub</a>
        </li>
        <li class="nav-item">
          <a class="sk-nav-link nav-link nav-more-item-mobile-items" href="https://scikit-learn.org/dev/versions.html">Otras versiones y descargas</a>
        </li>
        <li class="nav-item dropdown nav-more-item-dropdown">
          <a class="sk-nav-link nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Más</a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
              <a class="sk-nav-dropdown-item dropdown-item" href="../getting_started.html">¿Cómo empezar?</a>
              <a class="sk-nav-dropdown-item dropdown-item" href="../tutorial/index.html">Tutorial</a>
              <a class="sk-nav-dropdown-item dropdown-item" href="../whats_new/v0.24.html">Novedades</a>
              <a class="sk-nav-dropdown-item dropdown-item" href="../glossary.html">Glosario</a>
              <a class="sk-nav-dropdown-item dropdown-item" href="index.html">Desarrollo</a>
              <a class="sk-nav-dropdown-item dropdown-item" href="../faq.html">FAQ</a>
              <a class="sk-nav-dropdown-item dropdown-item" href="../support.html">Soporte</a>
              <a class="sk-nav-dropdown-item dropdown-item" href="../related_projects.html">Paquetes relacionados</a>
              <a class="sk-nav-dropdown-item dropdown-item" href="../roadmap.html">Hoja de ruta</a>
              <a class="sk-nav-dropdown-item dropdown-item" href="../about.html">Sobre nosotros</a>
              <a class="sk-nav-dropdown-item dropdown-item" href="https://github.com/scikit-learn/scikit-learn">GitHub</a>
              <a class="sk-nav-dropdown-item dropdown-item" href="https://scikit-learn.org/dev/versions.html">Otras versiones y descargas</a>
          </div>
        </li>
      </ul>
      <div id="searchbox" role="search">
          <div class="searchformwrapper">
          <form class="search" action="../search.html" method="get">
            <input class="sk-search-text-input" type="text" name="q" aria-labelledby="searchlabel" />
            <input class="sk-search-text-btn" type="submit" value="Ir a" />
          </form>
          </div>
      </div>
    </div>
  </div>
</nav>
<div class="d-flex" id="sk-doc-wrapper">
    <input type="checkbox" name="sk-toggle-checkbox" id="sk-toggle-checkbox">
    <label id="sk-sidemenu-toggle" class="sk-btn-toggle-toc btn sk-btn-primary" for="sk-toggle-checkbox">Alternar menú</label>
    <div id="sk-sidebar-wrapper" class="border-right">
      <div class="sk-sidebar-toc-wrapper">
        <div class="sk-sidebar-toc-logo">
          <a href="../index.html">
            <img
              class="sk-brand-img"
              src="../_static/scikit-learn-logo-small.png"
              alt="logo"/>
          </a>
        </div>
        <div class="btn-group w-100 mb-2" role="group" aria-label="rellinks">
            <a href="performance.html" role="button" class="btn sk-btn-rellink py-1" sk-rellink-tooltip="Cómo optimizar para velocidad">Prev</a><a href="index.html" role="button" class="btn sk-btn-rellink py-1" sk-rellink-tooltip="Guía del Desarrollador">Arriba</a>
            <a href="bug_triaging.html" role="button" class="btn sk-btn-rellink py-1" sk-rellink-tooltip="Evaluación de errores y curación de problemas">Sig.</a>
        </div>
        <div class="alert alert-danger p-1 mb-2" role="alert">
          <p class="text-center mb-0">
          <strong>scikit-learn 0.24.1</strong><br/>
          <a href="http://scikit-learn.org/dev/versions.html">Otras versiones</a>
          </p>
        </div>
        <div class="alert alert-warning p-1 mb-2" role="alert">
          <p class="text-center mb-0">
            Por favor <a class="font-weight-bold" href="../about.html#citing-scikit-learn"><string>cítanos</string></a> si usas el software.
          </p>
        </div>
            <div class="sk-sidebar-toc">
              <ul>
<li><a class="reference internal" href="#">Instalación de la versión de desarrollo de scikit-learn</a><ul>
<li><a class="reference internal" href="#installing-nightly-builds">Instalación de compilaciones nocturnas</a></li>
<li><a class="reference internal" href="#building-from-source">Compilando desde la fuente</a><ul>
<li><a class="reference internal" href="#dependencies">Dependencias</a><ul>
<li><a class="reference internal" href="#runtime-dependencies">Dependencias de ejecución</a></li>
<li><a class="reference internal" href="#build-dependencies">Dependencias de compilación</a></li>
<li><a class="reference internal" href="#test-dependencies">Dependencias de prueba</a></li>
</ul>
</li>
<li><a class="reference internal" href="#building-a-specific-version-from-a-tag">Compilar una versión específica de una etiqueta</a></li>
<li><a class="reference internal" href="#editable-mode">Modo editable</a></li>
</ul>
</li>
<li><a class="reference internal" href="#platform-specific-instructions">Instrucciones específicas de la plataforma</a><ul>
<li><a class="reference internal" href="#windows">Windows</a></li>
<li><a class="reference internal" href="#macos">macOS</a><ul>
<li><a class="reference internal" href="#macos-compilers-from-conda-forge">compiladores macOS de conda-forge</a></li>
<li><a class="reference internal" href="#macos-compilers-from-homebrew">compiladores macOS de Homebrew</a></li>
</ul>
</li>
<li><a class="reference internal" href="#linux">Linux</a><ul>
<li><a class="reference internal" href="#linux-compilers-from-the-system">Compiladores Linux del sistema</a></li>
<li><a class="reference internal" href="#linux-compilers-from-conda-forge">Compiladores Linux de conda-forge</a></li>
</ul>
</li>
<li><a class="reference internal" href="#freebsd">FreeBSD</a></li>
</ul>
</li>
<li><a class="reference internal" href="#alternative-compilers">Compiladores alternativos</a><ul>
<li><a class="reference internal" href="#building-with-intel-c-compiler-icc-using-oneapi-on-linux">Compilar con Intel C Compiler (ICC) usando oneAPI en Linux</a></li>
</ul>
</li>
<li><a class="reference internal" href="#parallel-builds">Compilaciones paralelas</a></li>
</ul>
</li>
</ul>

            </div>
      </div>
    </div>
    <div id="sk-page-content-wrapper">
      <div class="sk-page-content container-fluid body px-md-3" role="main">
        
  <section id="installing-the-development-version-of-scikit-learn">
<h1>Instalación de la versión de desarrollo de scikit-learn<a class="headerlink" href="#installing-the-development-version-of-scikit-learn" title="Enlazar permanentemente con este título">¶</a></h1>
<p>Esta sección presenta cómo instalar la <strong>rama principal</strong> de scikit-learn. Esto se puede hacer ya sea instalando una compilación nocturna o compilando desde el código fuente.</p>
<section id="installing-nightly-builds">
<span id="install-nightly-builds"></span><h2>Instalación de compilaciones nocturnas<a class="headerlink" href="#installing-nightly-builds" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Los servidores de integración continua del proyecto scikit-learn compilan, prueban y suben paquetes wheel para la versión más reciente de Python cada noche.</p>
<p>Instalar una compilación nocturna es la forma más rápida de:</p>
<ul class="simple">
<li><p>probar una nueva característica que será enviada en la próxima versión (es decir, una característica de una solicitud de pull que fue recientemente fusionada con la rama principal);</p></li>
<li><p>comprobar si un error detectado ha sido corregido desde la última versión.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><style type="text/css">
span.prompt1:before {
  content: "$ ";
}
</style><span class="prompt1">pip install --pre --extra-index https://pypi.anaconda.org/scipy-wheels-nightly/simple scikit-learn</span>
</pre></div></div></section>
<section id="building-from-source">
<span id="install-bleeding-edge"></span><h2>Compilando desde la fuente<a class="headerlink" href="#building-from-source" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Es necesario compilar desde el código fuente para trabajar en una contribución (corrección de errores, nueva función, mejora del código o de la documentación).</p>
<ol class="arabic" id="git-repo">
<li><p>Usa <a class="reference external" href="https://git-scm.com/">Git</a> para revisar la última fuente del repositorio <a class="reference external" href="https://github.com/scikit-learn/scikit-learn">scikit-learn</a> en Github.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">git clone git://github.com/scikit-learn/scikit-learn.git  <span class="c1"># add --depth 1 if your connection is slow</span></span>
<span class="prompt1"><span class="nb">cd</span> scikit-learn</span>
</pre></div></div><p>Si planeas enviar una solicitud de pull, deberías clonar desde su bifurcación.</p>
</li>
<li><p>Instala un compilador con soporte <a class="reference external" href="https://en.wikipedia.org/wiki/OpenMP">OpenMP</a> para su plataforma. Ver instrucciones para <a class="reference internal" href="#compiler-windows"><span class="std std-ref">Windows</span></a>, <a class="reference internal" href="#compiler-macos"><span class="std std-ref">macOS</span></a>, <a class="reference internal" href="#compiler-linux"><span class="std std-ref">Linux</span></a> y <a class="reference internal" href="#compiler-freebsd"><span class="std std-ref">FreeBSD</span></a>.</p></li>
<li><p>Opcional (pero recomendado): crear y activar un entorno virtual <a class="reference external" href="https://docs.python.org/3/tutorial/venv.html">dedicado</a> o <a class="reference external" href="https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html">conda</a>.</p></li>
<li><p>Instala <a class="reference external" href="https://cython.org">Cython</a> y compila el proyecto con pip en <a class="reference internal" href="#editable-mode"><span class="std std-ref">Modo editable</span></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">pip install cython</span>
<span class="prompt1">pip install --verbose --no-build-isolation --editable .</span>
</pre></div></div></li>
<li><p>Comprueba que el scikit-learn instalado tiene un número de versión que termina con <code class="docutils literal notranslate"><span class="pre">.dev0</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">python -c <span class="s2">&quot;import sklearn; sklearn.show_versions()&quot;</span></span>
</pre></div></div></li>
<li><p>Por favor, consulta <a class="reference internal" href="index.html#developers-guide"><span class="std std-ref">Guía del Desarrollador</span></a> y <a class="reference internal" href="tips.html#pytest-tips"><span class="std std-ref">Alias e indicadores útiles de pytest</span></a> para ejecutar las pruebas en el módulo de tu elección.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Tendrás que ejecutar el comando <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">--no-build-isolation</span> <span class="pre">--editable</span> <span class="pre">.</span></code> cada vez que se actualice el código fuente de un archivo Cython (que termine en <code class="docutils literal notranslate"><span class="pre">.pyx</span></code> o <code class="docutils literal notranslate"><span class="pre">.pxd</span></code>). Utilice la bandera <code class="docutils literal notranslate"><span class="pre">--no-build-isolation</span></code> para evitar compilar todo el proyecto cada vez, sólo los archivos que ha modificado.</p>
</div>
<section id="dependencies">
<h3>Dependencias<a class="headerlink" href="#dependencies" title="Enlazar permanentemente con este título">¶</a></h3>
<section id="runtime-dependencies">
<h4>Dependencias de ejecución<a class="headerlink" href="#runtime-dependencies" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Scikit-learn requiere las siguientes dependencias tanto en tiempo de compilación como en tiempo de ejecución:</p>
<ul class="simple">
<li><p>Python (&gt;= 3.6),</p></li>
<li><p>NumPy (&gt;= 1.13.3),</p></li>
<li><p>SciPy (&gt;= 0.19.1),</p></li>
<li><p>Joblib (&gt;= 0.11),</p></li>
<li><p>threadpoolctl (&gt;= 2.0.0).</p></li>
</ul>
<p>Esas dependencias son <strong>instaladas automáticamente por pip</strong> si faltaban al compilar scikit-learn desde el origen.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Para ejecutarse en PyPy, PyPy3-v5.10+, se requieren Numpy 1.14.0+, y scipy 1.1.0+. Para PyPy, solo se aplican las instrucciones de instalación con pip.</p>
</div>
</section>
<section id="build-dependencies">
<h4>Dependencias de compilación<a class="headerlink" href="#build-dependencies" title="Enlazar permanentemente con este título">¶</a></h4>
<p>La compilación de Scikit-learn también requiere:</p>
<ul class="simple">
<li><p>Cython &gt;= 0.28.5</p></li>
<li><p>Un compilador C/C++ y una biblioteca de tiempo de ejecución <a class="reference external" href="https://en.wikipedia.org/wiki/OpenMP">OpenMP</a> correspondiente. Consulta las <a class="reference internal" href="#platform-specific-instructions"><span class="std std-ref">instrucciones específicas del sistema de la plataforma</span></a> para obtener más detalles.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Si OpenMP no es compatible con el compilador, la compilación se hará con las funcionalidades de OpenMP deshabilitadas. Esto no es recomendable ya que forzará a algunos estimadores a ejecutarse en modo secuencial en lugar de aprovechar el paralelismo basado en hilos. Establecer la variable de entorno <code class="docutils literal notranslate"><span class="pre">SKLEARN_FAIL_NO_OPENMP</span></code> (antes de la cythonización) forzará la compilación a fallar si OpenMP no es compatible.</p>
</div>
<p>Desde la versión 0.21, scikit-learn detecta y utiliza automáticamente la biblioteca de álgebra lineal utilizada por SciPy <strong>en tiempo de ejecución</strong>. Por lo tanto, Scikit-learn no depende de implementaciones BLAS/LAPACK como OpenBlas, Atlas, Blis o MKL.</p>
</section>
<section id="test-dependencies">
<h4>Dependencias de prueba<a class="headerlink" href="#test-dependencies" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Las pruebas en ejecución requieren:</p>
<ul class="simple">
<li><p>pytest &gt;= 5.0.1</p></li>
</ul>
<p>Algunas pruebas también requieren <a class="reference external" href="https://pandas.pydata.org">pandas</a>.</p>
</section>
</section>
<section id="building-a-specific-version-from-a-tag">
<h3>Compilar una versión específica de una etiqueta<a class="headerlink" href="#building-a-specific-version-from-a-tag" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Si desea compilar una versión estable, puede <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span> <span class="pre">&lt;VERSION&gt;</span></code> para obtener el código para esa versión en particular, o descargar un archivo zip de la versión desde github.</p>
</section>
<section id="editable-mode">
<span id="id1"></span><h3>Modo editable<a class="headerlink" href="#editable-mode" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Si ejecutas la versión de desarrollo, es engorroso reinstalar el paquete cada vez que actualices las fuentes. Por lo tanto, se recomienda que instales con el <a href="#id1"><span class="problematic" id="id2">``</span></a>pip install –no-build-isolation –editable . ` , que te permite editar el código en su lugar. Esto compila la extensión en su lugar y crea un enlace al directorio de desarrollo (ver <a class="reference external" href="https://pip.pypa.io/en/stable/reference/pip_install/#editable-installs">los documentos pip</a>).</p>
<p>Esto es fundamentalmente similar a usar el comando <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">develop</span></code> (ver <a class="reference external" href="https://setuptools.readthedocs.io/en/latest/setuptools.html#development-mode">el archivo setuptool docs</a>). Sin embargo, se prefiere usar pip.</p>
<p>En sistemas semejantes a Unix, puede escribir equivalentemente <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">in</span></code> desde la carpeta de nivel superior. Echa un vistazo a <code class="docutils literal notranslate"><span class="pre">Makefile</span></code> para utilidades adicionales.</p>
</section>
</section>
<section id="platform-specific-instructions">
<span id="id2"></span><h2>Instrucciones específicas de la plataforma<a class="headerlink" href="#platform-specific-instructions" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Aquí están las instrucciones para instalar un compilador C/C++ en funcionamiento con soporte OpenMP para compilar extensiones scikit-learn de Cython para cada plataforma soportada.</p>
<section id="windows">
<span id="compiler-windows"></span><h3>Windows<a class="headerlink" href="#windows" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Primero, instala <a class="reference external" href="https://visualstudio.microsoft.com/downloads/">Herramientas de compilación para Visual Studio 2019</a>.</p>
<div class="admonition warning">
<p class="admonition-title">Advertencia</p>
<p>NO necesitas instalar Visual Studio 2019. Sólo necesitas las «Herramientas de compilación para Visual Studio 2019», en «Todas las descargas» -&gt; «Herramientas para Visual Studio 2019».</p>
</div>
<p>En segundo lugar, averigua si estás ejecutando Python de 64 o 32 bits. El comando de compilación depende de la arquitectura del intérprete de Python. Puedes comprobar la arquitectura ejecutando lo siguiente en la consola <code class="docutils literal notranslate"><span class="pre">cmd</span></code> o <code class="docutils literal notranslate"><span class="pre">powershell</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">python -c <span class="s2">&quot;import struct; print(struct.calcsize(&#39;P&#39;) * 8)&quot;</span></span>
</pre></div></div><p>Para Python de 64 bits, configura el entorno de compilación ejecutando los siguientes comandos en <code class="docutils literal notranslate"><span class="pre">cmd</span></code> o un Anaconda Prompt (si utilizas Anaconda):</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ SET DISTUTILS_USE_SDK=1
$ &quot;C:\Program Files (x86)\Microsoft Visual Studio\2019\BuildTools\VC\Auxiliary\Build\vcvarsall.bat&quot; x64
</pre></div>
</div>
</div></blockquote>
<p>Reemplaza <code class="docutils literal notranslate"><span class="pre">x64</span></code> por <code class="docutils literal notranslate"><span class="pre">x86</span></code> para compilar por Python de 32-bits.</p>
<p>Por favor, ten en cuenta que la ruta anterior puede ser diferente de usuario a usuario. El objetivo es apuntar al archivo «vcvarsall.bat» que establecerá las variables de entorno necesarias en la línea de comandos actual.</p>
<p>Finalmente, compila scikit-learn a partir de esta línea de comandos:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">pip install --verbose --no-build-isolation --editable .</span>
</pre></div></div></section>
<section id="macos">
<span id="compiler-macos"></span><h3>macOS<a class="headerlink" href="#macos" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El compilador C predeterminado en macOS, Apple clang (alias confusamente como <code class="docutils literal notranslate"><span class="pre">/usr/bin/gcc</span></code>), no soporta directamente OpenMP. Presentamos dos alternativas para habilitar el soporte OpenMP:</p>
<ul class="simple">
<li><p>instala <code class="docutils literal notranslate"><span class="pre">conda-forge::compilers</span></code> con conda;</p></li>
<li><p>o instala <code class="docutils literal notranslate"><span class="pre">libomp</span></code> con Homebrew para extender el compilador predeterminado de Apple clang.</p></li>
</ul>
<p>Para el hardware Apple Silicon M1, sólo se sabe que el método conda-forge siguiente funciona en el momento de la escritura (enero de 2021). Puedes instalar la distribución <code class="docutils literal notranslate"><span class="pre">macos/arm64</span></code> de conda usando el <a class="reference external" href="https://github.com/conda-forge/miniforge#miniforge">miniforge installer</a></p>
<section id="macos-compilers-from-conda-forge">
<h4>compiladores macOS de conda-forge<a class="headerlink" href="#macos-compilers-from-conda-forge" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Si utilizas el gestor de paquetes conda (versión &gt;= 4.7), puede instalar el meta-paquete <code class="docutils literal notranslate"><span class="pre">compilers</span></code> desde el canal conda-forge, el cual proporciona compiladores C/C++ habilitados para OpenMP basados en la toolchain llvm.</p>
<p>Primero instale las herramientas de línea de comandos de macOS:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">xcode-select --install</span>
</pre></div></div><p>Se recomienda utilizar un <a class="reference external" href="https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html">conda environment</a> dedicado para compilar scikit-learn desde el código fuente:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">conda create -n sklearn-dev -c conda-forge python numpy scipy cython <span class="se">\</span>
    joblib threadpoolctl pytest compilers llvm-openmp</span>
<span class="prompt1">conda activate sklearn-dev</span>
<span class="prompt1">make clean</span>
<span class="prompt1">pip install --verbose --no-build-isolation --editable .</span>
</pre></div></div><div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Si obtienes algún mensaje de error de dependencia en conflicto, intenta comentar cualquier configuración de conda personalizada en el <code class="docutils literal notranslate"><span class="pre">$HOME/.condarc</span></code>. En particular, se sabe que la directiva <code class="docutils literal notranslate"><span class="pre">channel_priority:</span> <span class="pre">strict</span></code> causa problemas en esta configuración.</p>
</div>
<p>Puedes comprobar que los compiladores personalizados están correctamente instalados desde conda forge usando el siguiente comando:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">conda list</span>
</pre></div></div><p>que debe incluir <code class="docutils literal notranslate"><span class="pre">compilers</span></code> y <code class="docutils literal notranslate"><span class="pre">llvm-openmp</span></code>.</p>
<p>El meta-paquete de los compiladores establecerá automáticamente variables de entorno personalizadas:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1"><span class="nb">echo</span> <span class="nv">$CC</span></span>
<span class="prompt1"><span class="nb">echo</span> <span class="nv">$CXX</span></span>
<span class="prompt1"><span class="nb">echo</span> <span class="nv">$CFLAGS</span></span>
<span class="prompt1"><span class="nb">echo</span> <span class="nv">$CXXFLAGS</span></span>
<span class="prompt1"><span class="nb">echo</span> <span class="nv">$LDFLAGS</span></span>
</pre></div></div><p>Apuntan a archivos y carpetas de tu entorno conda <code class="docutils literal notranslate"><span class="pre">sklearn-dev</span></code> (en particular en las subcarpetas bin/, include/ y lib/). Por ejemplo <code class="docutils literal notranslate"><span class="pre">-L/path/to/conda/envs/sklearn-dev/lib</span></code> debería aparecer en <code class="docutils literal notranslate"><span class="pre">LDFLAGS</span></code>.</p>
<p>En el registro, deberías ver la extensión compilada que se está construyendo con los compiladores clang y clang++ instalados por conda con la bandera de línea de comando <code class="docutils literal notranslate"><span class="pre">-fopenmp</span></code>.</p>
</section>
<section id="macos-compilers-from-homebrew">
<h4>compiladores macOS de Homebrew<a class="headerlink" href="#macos-compilers-from-homebrew" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Otra solución es habilitar el soporte OpenMP para el compilador clang que se envía por defecto en macOS.</p>
<p>Primero instale las herramientas de línea de comandos de macOS:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">xcode-select --install</span>
</pre></div></div><p>Instalar el gestor de paquetes <a class="reference external" href="https://brew.sh">Homebrew</a> para macOS.</p>
<p>Instalar la biblioteca OpenMP de LLVM:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">brew install libomp</span>
</pre></div></div><p>Establece las siguientes variables de entorno:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1"><span class="nb">export</span> <span class="nv">CC</span><span class="o">=</span>/usr/bin/clang</span>
<span class="prompt1"><span class="nb">export</span> <span class="nv">CXX</span><span class="o">=</span>/usr/bin/clang++</span>
<span class="prompt1"><span class="nb">export</span> <span class="nv">CPPFLAGS</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$CPPFLAGS</span><span class="s2"> -Xpreprocessor -fopenmp&quot;</span></span>
<span class="prompt1"><span class="nb">export</span> <span class="nv">CFLAGS</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$CFLAGS</span><span class="s2"> -I/usr/local/opt/libomp/include&quot;</span></span>
<span class="prompt1"><span class="nb">export</span> <span class="nv">CXXFLAGS</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$CXXFLAGS</span><span class="s2"> -I/usr/local/opt/libomp/include&quot;</span></span>
<span class="prompt1"><span class="nb">export</span> <span class="nv">LDFLAGS</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$LDFLAGS</span><span class="s2"> -Wl,-rpath,/usr/local/opt/libomp/lib -L/usr/local/opt/libomp/lib -lomp&quot;</span></span>
</pre></div></div><p>Finalmente, compila scikit-learn en modo verbose (para comprobar la presencia de la bandera <code class="docutils literal notranslate"><span class="pre">-fopenmp</span></code> en los comandos del compilador):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">make clean</span>
<span class="prompt1">pip install --verbose --no-build-isolation --editable .</span>
</pre></div></div></section>
</section>
<section id="linux">
<span id="compiler-linux"></span><h3>Linux<a class="headerlink" href="#linux" title="Enlazar permanentemente con este título">¶</a></h3>
<section id="linux-compilers-from-the-system">
<h4>Compiladores Linux del sistema<a class="headerlink" href="#linux-compilers-from-the-system" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Instalar scikit-learn desde el código fuente sin usar conda requiere que haya instalado las cabeceras de desarrollo de Python y un compilador C/C++ de trabajo con soporte OpenMP (normalmente la herramienta GCC).</p>
<p>Instala dependencias de compilación para sistemas operativos basados en Debian, por ejemplo, Ubuntu:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">sudo apt-get install build-essential python3-dev python3-pip</span>
</pre></div></div><p>luego procede como de costumbre:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">pip3 install cython</span>
<span class="prompt1">pip3 install --verbose --editable .</span>
</pre></div></div><p>Cython y las wheels precompiladas para las dependencias de tiempo de ejecución (numpy, scipy y joblib) deberían instalarse automáticamente en <code class="docutils literal notranslate"><span class="pre">$HOME/.local/lib/pythonX.Y/site-packages</span></code>. También puedes ejecutar los comandos anteriores desde un <a class="reference external" href="https://docs.python.org/3/tutorial/venv.html">virtualenv</a> o un <a class="reference external" href="https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html">conda environment</a> para obtener el aislamiento completo de los paquetes Python instalados a través del empaquetador del sistema. Cuando se utiliza un entorno aislado, <code class="docutils literal notranslate"><span class="pre">pip3</span></code> debe ser reemplazado por <code class="docutils literal notranslate"><span class="pre">pip</span></code> en los comandos anteriores.</p>
<p>Cuando las wheels precompiladas de las dependencias de tiempo de ejecución no están disponibles para tu arquitectura (por ejemplo, ARM), puedes instalar las versiones del sistema:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">sudo apt-get install cython3 python3-numpy python3-scipy</span>
</pre></div></div><p>En Red Hat y clones (por ejemplo, CentOS), instala las dependencias usando:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">sudo yum -y install gcc gcc-c++ python3-devel numpy scipy</span>
</pre></div></div></section>
<section id="linux-compilers-from-conda-forge">
<h4>Compiladores Linux de conda-forge<a class="headerlink" href="#linux-compilers-from-conda-forge" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Alternativamente, instala una versión reciente de la toolchain del compilador de C GNU (GCC) en la carpeta de usuario usando conda:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">conda create -n sklearn-dev -c conda-forge python numpy scipy cython <span class="se">\</span>
    joblib threadpoolctl pytest compilers</span>
<span class="prompt1">conda activate sklearn-dev</span>
<span class="prompt1">pip install --verbose --no-build-isolation --editable .</span>
</pre></div></div></section>
</section>
<section id="freebsd">
<span id="compiler-freebsd"></span><h3>FreeBSD<a class="headerlink" href="#freebsd" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El compilador clang incluido en los sistemas base FreeBSD 12.0 y 11.2 no incluye soporte OpenMP. Necesitas instalar la librería <code class="docutils literal notranslate"><span class="pre">openmp</span></code> desde paquetes (o puertos):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">sudo pkg install openmp</span>
</pre></div></div><p>Esto instalará archivos de cabecera en <code class="docutils literal notranslate"><span class="pre">/usr/local/include</span></code> y libs en <code class="docutils literal notranslate"><span class="pre">/usr/local/lib</span></code>. Dado que estos directorios no son buscados por defecto, puedes establecer las variables de entorno a estas ubicaciones:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1"><span class="nb">export</span> <span class="nv">CFLAGS</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$CFLAGS</span><span class="s2"> -I/usr/local/include&quot;</span></span>
<span class="prompt1"><span class="nb">export</span> <span class="nv">CXXFLAGS</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$CXXFLAGS</span><span class="s2"> -I/usr/local/include&quot;</span></span>
<span class="prompt1"><span class="nb">export</span> <span class="nv">LDFLAGS</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$LDFLAGS</span><span class="s2"> -Wl,-rpath,/usr/local/lib -L/usr/local/lib -lomp&quot;</span></span>
</pre></div></div><p>Finalmente, compila el paquete usando el comando estándar:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">pip install --verbose --no-build-isolation --editable .</span>
</pre></div></div><p>Para las próximas versiones de FreeBSD 12.1 y 11.3, OpenMP será incluido en el sistema base y estos pasos no serán necesarios.</p>
</section>
</section>
<section id="alternative-compilers">
<h2>Compiladores alternativos<a class="headerlink" href="#alternative-compilers" title="Enlazar permanentemente con este título">¶</a></h2>
<p>El comando:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">pip install --verbose --editable .</span>
</pre></div></div><p>compilará scikit-learn usando el compilador predeterminado de C/C++. Si deseas construir scikit-learn con otro compilador manejado por <code class="docutils literal notranslate"><span class="pre">distutils</span></code> o por <code class="docutils literal notranslate"><span class="pre">numpy.distutils</span></code>, utiliza el siguiente comando:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">python setup.py build_ext --compiler<span class="o">=</span>&lt;compiler&gt; -i build_clib --compiler<span class="o">=</span>&lt;compiler&gt;</span>
</pre></div></div><p>Para ver la lista de compiladores disponibles ejecutar:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">python setup.py build_ext --help-compiler</span>
</pre></div></div><p>Si tu compilador no aparece aquí, puedes especificarlo a través de las variables de entorno <code class="docutils literal notranslate"><span class="pre">CC</span></code> y <code class="docutils literal notranslate"><span class="pre">LDSHARED</span></code> (no funciona en Windows):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1"><span class="nv">CC</span><span class="o">=</span>&lt;compiler&gt; <span class="nv">LDSHARED</span><span class="o">=</span><span class="s2">&quot;&lt;compiler&gt; -shared&quot;</span> python setup.py build_ext -i</span>
</pre></div></div><section id="building-with-intel-c-compiler-icc-using-oneapi-on-linux">
<h3>Compilar con Intel C Compiler (ICC) usando oneAPI en Linux<a class="headerlink" href="#building-with-intel-c-compiler-icc-using-oneapi-on-linux" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Intel proporciona acceso a todos sus kits de herramientas y paquetes oneAPI a través de un repositorio público de APT. En primer lugar, es necesario obtener e instalar la clave pública de este repositorio:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">wget https://apt.repos.intel.com/intel-gpg-keys/GPG-PUB-KEY-INTEL-SW-PRODUCTS-2023.PUB</span>
<span class="prompt1">sudo apt-key add GPG-PUB-KEY-INTEL-SW-PRODUCTS-2023.PUB</span>
<span class="prompt1">rm GPG-PUB-KEY-INTEL-SW-PRODUCTS-2023.PUB</span>
</pre></div></div><p>Luego, añade el repositorio oneAPI a tus repositorios APT:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">sudo add-apt-repository <span class="s2">&quot;deb https://apt.repos.intel.com/oneapi all main&quot;</span></span>
<span class="prompt1">sudo apt-get update</span>
</pre></div></div><p>Instala ICC, empaquetado con el nombre <code class="docutils literal notranslate"><span class="pre">intel-oneapi-icc</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">sudo apt-get install intel-oneapi-icc</span>
</pre></div></div><p>Antes de usar ICC, necesitas configurar las variables de entorno:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1"><span class="nb">source</span> /opt/intel/oneapi/setvars.sh</span>
</pre></div></div><p>Finalmente, puedes compilar scikit-learn. Por ejemplo en Linux x86_64:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">python setup.py build_ext --compiler<span class="o">=</span>intelem -i build_clib --compiler<span class="o">=</span>intelem</span>
</pre></div></div></section>
</section>
<section id="parallel-builds">
<h2>Compilaciones paralelas<a class="headerlink" href="#parallel-builds" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Es posible construir extensiones compiladas de scikit-learn en paralelo mediante la configuración y la variable de entorno como sigue, antes de llamar a <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span></code> o comandos <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">build_ext</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">SKLEARN_BUILD_PARALLEL</span><span class="o">=</span><span class="mi">3</span>
<span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">verbose</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">build</span><span class="o">-</span><span class="n">isolation</span> <span class="o">--</span><span class="n">editable</span> <span class="o">.</span>
</pre></div>
</div>
<p>En una máquina con 2 núcleos de CPU, puede ser beneficioso utilizar un nivel de paralelismo de 3 para solapar las tareas ligadas a la E/S (lectura y escritura de archivos en el disco) con las tareas ligadas a la CPU (compilación real).</p>
</section>
</section>


      </div>
    <div class="container">
      <footer class="sk-content-footer">
            &copy; 2007 - 2020, scikit-learn developers (BSD License).
          <a href="../_sources/developers/advanced_installation.rst.txt" rel="nofollow">Mostrar la fuente de esta página</a>
      </footer>
    </div>
  </div>
</div>
<script src="../_static/js/vendor/bootstrap.min.js"></script>

<script>
    window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
    ga('create', 'UA-22606712-2', 'auto');
    ga('set', 'anonymizeIp', true);
    ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


<script>
$(document).ready(function() {
    /* Add a [>>>] button on the top-right corner of code samples to hide
     * the >>> and ... prompts and the output and thus make the code
     * copyable. */
    var div = $('.highlight-python .highlight,' +
                '.highlight-python3 .highlight,' +
                '.highlight-pycon .highlight,' +
		'.highlight-default .highlight')
    var pre = div.find('pre');

    // get the styles from the current theme
    pre.parent().parent().css('position', 'relative');
    var hide_text = 'Hide prompts and outputs';
    var show_text = 'Show prompts and outputs';

    // create and add the button to all the code blocks that contain >>>
    div.each(function(index) {
        var jthis = $(this);
        if (jthis.find('.gp').length > 0) {
            var button = $('<span class="copybutton">&gt;&gt;&gt;</span>');
            button.attr('title', hide_text);
            button.data('hidden', 'false');
            jthis.prepend(button);
        }
        // tracebacks (.gt) contain bare text elements that need to be
        // wrapped in a span to work with .nextUntil() (see later)
        jthis.find('pre:has(.gt)').contents().filter(function() {
            return ((this.nodeType == 3) && (this.data.trim().length > 0));
        }).wrap('<span>');
    });

    // define the behavior of the button when it's clicked
    $('.copybutton').click(function(e){
        e.preventDefault();
        var button = $(this);
        if (button.data('hidden') === 'false') {
            // hide the code output
            button.parent().find('.go, .gp, .gt').hide();
            button.next('pre').find('.gt').nextUntil('.gp, .go').css('visibility', 'hidden');
            button.css('text-decoration', 'line-through');
            button.attr('title', show_text);
            button.data('hidden', 'true');
        } else {
            // show the code output
            button.parent().find('.go, .gp, .gt').show();
            button.next('pre').find('.gt').nextUntil('.gp, .go').css('visibility', 'visible');
            button.css('text-decoration', 'none');
            button.attr('title', hide_text);
            button.data('hidden', 'false');
        }
    });

	/*** Add permalink buttons next to glossary terms ***/
	$('dl.glossary > dt[id]').append(function() {
		return ('<a class="headerlink" href="#' +
			    this.getAttribute('id') +
			    '" title="Permalink to this term">¶</a>');
	});
  /*** Hide navbar when scrolling down ***/
  // Returns true when headerlink target matches hash in url
  (function() {
    hashTargetOnTop = function() {
        var hash = window.location.hash;
        if ( hash.length < 2 ) { return false; }

        var target = document.getElementById( hash.slice(1) );
        if ( target === null ) { return false; }

        var top = target.getBoundingClientRect().top;
        return (top < 2) && (top > -2);
    };

    // Hide navbar on load if hash target is on top
    var navBar = document.getElementById("navbar");
    var navBarToggler = document.getElementById("sk-navbar-toggler");
    var navBarHeightHidden = "-" + navBar.getBoundingClientRect().height + "px";
    var $window = $(window);

    hideNavBar = function() {
        navBar.style.top = navBarHeightHidden;
    };

    showNavBar = function() {
        navBar.style.top = "0";
    }

    if (hashTargetOnTop()) {
        hideNavBar()
    }

    var prevScrollpos = window.pageYOffset;
    hideOnScroll = function(lastScrollTop) {
        if (($window.width() < 768) && (navBarToggler.getAttribute("aria-expanded") === 'true')) {
            return;
        }
        if (lastScrollTop > 2 && (prevScrollpos <= lastScrollTop) || hashTargetOnTop()){
            hideNavBar()
        } else {
            showNavBar()
        }
        prevScrollpos = lastScrollTop;
    };

    /*** high performance scroll event listener***/
    var raf = window.requestAnimationFrame ||
        window.webkitRequestAnimationFrame ||
        window.mozRequestAnimationFrame ||
        window.msRequestAnimationFrame ||
        window.oRequestAnimationFrame;
    var lastScrollTop = $window.scrollTop();

    if (raf) {
        loop();
    }

    function loop() {
        var scrollTop = $window.scrollTop();
        if (lastScrollTop === scrollTop) {
            raf(loop);
            return;
        } else {
            lastScrollTop = scrollTop;
            hideOnScroll(lastScrollTop);
            raf(loop);
        }
    }
  })();
});

</script>
    
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
    
</body>
</html>